/*! joindin.js 0.2.0 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
var JoindIn=function(a){"use strict";function b(a,b){var c="http://joind.in/user/view/";if(0!==a.talks.length){b.className+=" joindin-speaker";for(var d=a.talks[0].speakers[0],e=0,f=0;f<a.talks.length;f++)e+=a.talks[f].average_rating;e=Math.round(e/a.talks.length);var g=j("h1");g.textContent=d.speaker_name;var h=j("a");h.href=c+d.speaker_uri.slice(d.speaker_uri.lastIndexOf("/")+1),h.appendChild(g);var k=j("img");k.src=i.replace(/RATING/,e),k.alt="Rate "+e+" of 5";var l=j("span");l.textContent="("+a.talks.length+" talks)",b.appendChild(h),b.appendChild(k),b.appendChild(l)}}function c(b,c){b=b.comments[0],c.className+=" joindin-talk-comment";var d=j("blockquote");d.cite=b.talk_uri,d.setAttribute("itemprop","review"),d.setAttribute("itemscope",""),d.setAttribute("itemtype","http://schema.org/Review");var e=j("div"),f=j("img");f.src=i.replace(/RATING/,b.rating),f.alt="Rate "+b.rating+" of 5",e.className="rating-wrapper",e.appendChild(f);var g=j("div");g.className="text-wrapper";var h=j("p");h.setAttribute("itemprop","description"),h.textContent=b.comment,g.appendChild(h);var k=j("footer"),l=j("cite");l.setAttribute("itemprop","author"),l.textContent=b.user_display_name;var m=j("time");m.setAttribute("datetime",b.created_date),m.setAttribute("itemprop","datePublished"),m.textContent=new Date(b.created_date).toLocaleString(),k.appendChild(a.createTextNode("â€” ")),k.appendChild(l),k.appendChild(a.createTextNode(" on ")),k.appendChild(m),g.appendChild(k),d.appendChild(e),d.appendChild(g),c.appendChild(d)}function d(a,b){a=a.talks[0],b.className+=" joindin-talk";var c=j("a");c.href=a.website_uri;var d=j("h1");d.textContent=a.talk_title,c.appendChild(d);var e=j("p");e.textContent=a.talk_description;var f=j("span");f.textContent=a.speakers.map(function(a){return a.speaker_name}).join(" , ");var g=j("img");g.src=i.replace(/RATING/,a.average_rating),g.alt="Rate "+a.average_rating+" of 5",b.appendChild(c),b.appendChild(f),b.appendChild(g),b.appendChild(e)}var e={speaker:"users",talk:"talks","talk-comment":"talk_comments"},f=".joindin-embed",g=[],h="http://api.joind.in/v2.1/",i="https://joind.in/inc/img/rating-RATING.gif",j=a.createElement.bind(a),k=a.querySelectorAll(f);return[].forEach.call(k,function(f,i){var k=e[f.getAttribute("data-type")],l=f.getAttribute("data-id"),m=h;if("talk_comments"===k)m+=k+"/"+l,g[i]=function(a){c(a,f)};else if("talks"===k)m+=k+"/"+l,g[i]=function(a){d(a,f)};else{if("users"!==k)throw new Error("Data type not recognized");m+=k+"/"+l+"/talks",g[i]=function(a){b(a,f)}}var n=j("script");n.src=m+"?format=json&callback=JoindIn.callbacks["+i+"]",a.head.appendChild(n),a.head.removeChild(n)}),{callbacks:g}}(document);