/*! JoindIn.js 0.5.0 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.JoindIn=b()}(this,function(){"use strict";function a(a,b,c){for(var d=0;d<b.length;d++)a.setAttribute(b[d],c[d]);return a}function b(a,b,c){for(var d=0;d<b.length;d++)a[b[d]]=c[d];return a}function c(a,b){for(var c=0;c<b.length;c++)a.appendChild(b[c]);return a}function d(a){var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++)b+=a[c];return Math.round(b/a.length)}function e(a,b){b||(b=function(){});var c=new XMLHttpRequest;c.addEventListener("readystatechange",function(){if(!(c.readyState<4)){if(c.status>=200&&c.status<300||304===c.status)return void b(c);throw new Error(c.responseText)}}),c.open("GET",a,!0),c.send()}function f(a){return b(w("img"),["src","alt"],[u.replace(/RATING/,a),"Rate "+a+" of 5"])}function g(a){var d,e,f=w("dl");for(var g in a)a.hasOwnProperty(g)&&(d=b(w("dt"),["textContent"],[g+": "]),e=b(w("dd"),["textContent"],[a[g]]),c(f,[d,e]));return f}function h(d,e){var f,g,h,i,j,k;g=w("div"),g.className="icon-wrapper",e.icon&&(f=a(w("img"),["src"],[v+e.icon]),g.appendChild(f)),h=w("div"),h.className="info-wrapper",i=b(w("h1"),["textContent"],[e.name]),j=b(w("a"),["href","innerHTML"],[e.website_uri,i.outerHTML]),k=b(w("a"),["href","textContent"],[e.href,e.href]),c(h,[j,k]),c(d,[g,h])}function i(a,b){var d=w("ul"),e=b.events.map(function(a){var b=w("li");return h(b,a),b});a.className+=" joindin-cfps",c(d,e),a.appendChild(d)}function j(d,e){var f,h,i,j,k,l,m,n,o;f=e.events[0],h=f.icon?a(w("img"),["src"],[v+f.icon]):document.createTextNode(""),i=b(w("h1"),["textContent"],[f.name]),j=b(w("a"),["href","innerHTML"],[f.website_uri,i.outerHTML]),k=b(w("a"),["href","textContent"],[f.href,f.href]),l=b(w("time"),["textContent"],[new Date(f.start_date).toDateString()]),a(l,["datetime"],[f.start_date]),m=b(w("time"),["textContent"],[new Date(f.end_date).toDateString()]),a(m,["datetime"],[f.end_date]),n=b(w("p"),["textContent"],[f.description]),o=g({Attendees:f.attendee_count,Tracks:f.tracks_count,Talks:f.talks_count}),d.className+=" joindin-event",c(d,[h,j,k,l,document.createTextNode(" - "),m,n,document.createTextNode("Other info about the event:"),o])}function k(a,e){var g,h,i,j,k,l="http://joind.in/user/view/";0!==e.talks.length&&(j=e.talks[0].speakers[0],g=b(w("h1"),["textContent"],[j.speaker_name]),h=b(w("a"),["href","innerHTML"],[l+j.speaker_uri.slice(j.speaker_uri.lastIndexOf("/")+1),g.outerHTML]),i=f(d(e.talks.map(function(a){return a.average_rating}))),k=b(w("span"),["textContent"],["("+e.talks.length+" talks)"]),a.className+=" joindin-speaker",c(a,[h,i,k]))}function l(d,e){var g,h,i,j,k,l,m,n,o;g=e.comments[0],h=b(w("blockquote"),["cite"],[g.talk_uri]),a(h,["itemprop","itemscope","itemtype"],["review","","http://schema.org/Review"]),l=b(w("div"),["className"],["text-wrapper"]),k=a(w("p"),["itemprop"],["description"]),b(k,["textContent"],[g.comment]),m=a(w("cite"),["itemprop"],["author"]),b(m,["textContent"],[g.user_display_name]),n=a(w("time"),["datetime","itemprop"],[g.created_date,"datePublished"]),b(n,["textContent"],[new Date(g.created_date).toLocaleString()]),o=f(g.rating),j=b(w("div"),["className","innerHTML"],["rating-wrapper",o.outerHTML]),i=c(w("footer"),[document.createTextNode("â€” "),m,document.createTextNode(" on "),n]),c(l,[k,i]),c(h,[j,l]),d.className+=" joindin-talk-comment",d.appendChild(h)}function m(a,d){var e,g,h,i,j,k;e=d.talks[0],g=b(w("h1"),["textContent"],[e.talk_title]),h=b(w("a"),["href","innerHTML"],[e.website_uri,g.outerHTML]),i=b(w("p"),["textContent"],[e.talk_description]),j=b(w("span"),["textContent"],[e.speakers.map(function(a){return a.speaker_name}).join(" , ")]),k=f(e.average_rating),a.className+=" joindin-talk",c(a,[h,j,k,i])}function n(b){return a(w("div"),["className","data-id","data-type","data-theme"],["joindin-embed joindin-"+b.type,b.id,b.type,b.theme])}function o(a,b,c){var d,f=t;if("cfps"===b.type)f+="events?filter=cfp",d=i;else if("events"===b.type)f+=b.type+"/"+b.id,d=j;else if("talk_comments"===b.type)f+=b.type+"/"+b.id,d=l;else if("talks"===b.type)f+=b.type+"/"+b.id,d=m;else{if("users"!==b.type)throw new Error("Data type not recognized");f+=b.type+"/"+b.id+"/talks",d=k}e(f+"?format=json",function(b){a.children.length>0||(c||(c=function(){}),d(a,JSON.parse(b.responseText)),c(a))})}function p(a,b){var c=n(a);a.type=r[a.type],o(c,a,b)}function q(){[].forEach.call(document.querySelectorAll("."+s),function(a){o(a,{id:a.getAttribute("data-id"),type:r[a.getAttribute("data-type")]})})}var r={cfps:"cfps",event:"events",speaker:"users",talk:"talks","talk-comment":"talk_comments"},s="joindin-embed",t="https://api.joind.in/v2.1/",u="https://joind.in/inc/img/rating-RATING.gif",v="https://joind.in/inc/img/event_icons/",w=document.createElement.bind(document);return{createWidget:p,init:q}});
//# sourceMappingURL=joindin.min.js.map