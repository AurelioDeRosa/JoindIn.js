/*! JoindIn.js 0.4.0 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
!function(a,b){"use strict";function c(a,b,c){for(var d=0;d<b.length;d++)a.setAttribute(b[d],c[d]);return a}function d(a,b,c){for(var d=0;d<b.length;d++)a[b[d]]=c[d];return a}function e(a,b){for(var c=0;c<b.length;c++)a.appendChild(b[c]);return a}function f(a){var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++)b+=a[c];return Math.round(b/a.length)}function g(a){return d(v("img"),["src","alt"],[t.replace(/RATING/,a),"Rate "+a+" of 5"])}function h(a){var b,c,f=v("dl");for(var g in a)a.hasOwnProperty(g)&&(b=d(v("dt"),["textContent"],[g+": "]),c=d(v("dd"),["textContent"],[a[g]]),e(f,[b,c]));return f}function i(a,b){var f,g,h,i,j,k;g=v("div"),g.className="icon-wrapper",b.icon&&(f=c(v("img"),["src"],[u+b.icon]),g.appendChild(f)),h=v("div"),h.className="info-wrapper",i=d(v("h1"),["textContent"],[b.name]),j=d(v("a"),["href","innerHTML"],[b.website_uri,i.outerHTML]),k=d(v("a"),["href","textContent"],[b.href,b.href]),e(h,[j,k]),e(a,[g,h])}function j(a,b){var c=v("ul"),d=b.events.map(function(a){var b=v("li");return i(b,a),b});a.className+=" joindin-cfps",e(c,d),a.appendChild(c)}function k(a,f){var g,i,j,k,l,m,n,o,p;g=f.events[0],i=g.icon?c(v("img"),["src"],[u+g.icon]):b.createTextNode(""),j=d(v("h1"),["textContent"],[g.name]),k=d(v("a"),["href","innerHTML"],[g.website_uri,j.outerHTML]),l=d(v("a"),["href","textContent"],[g.href,g.href]),m=d(v("time"),["textContent"],[new Date(g.start_date).toDateString()]),c(m,["datetime"],[g.start_date]),n=d(v("time"),["textContent"],[new Date(g.end_date).toDateString()]),c(n,["datetime"],[g.end_date]),o=d(v("p"),["textContent"],[g.description]),p=h({Attendees:g.attendee_count,Tracks:g.tracks_count,Talks:g.talks_count}),a.className+=" joindin-event",e(a,[i,k,l,m,b.createTextNode(" - "),n,o,b.createTextNode("Other info about the event:"),p])}function l(a,b){var c,h,i,j,k,l="http://joind.in/user/view/";0!==b.talks.length&&(j=b.talks[0].speakers[0],c=d(v("h1"),["textContent"],[j.speaker_name]),h=d(v("a"),["href","innerHTML"],[l+j.speaker_uri.slice(j.speaker_uri.lastIndexOf("/")+1),c.outerHTML]),i=g(f(b.talks.map(function(a){return a.average_rating}))),k=d(v("span"),["textContent"],["("+b.talks.length+" talks)"]),a.className+=" joindin-speaker",e(a,[h,i,k]))}function m(a,f){var h,i,j,k,l,m,n,o,p;h=f.comments[0],i=d(v("blockquote"),["cite"],[h.talk_uri]),c(i,["itemprop","itemscope","itemtype"],["review","","http://schema.org/Review"]),m=d(v("div"),["className"],["text-wrapper"]),l=c(v("p"),["itemprop"],["description"]),d(l,["textContent"],[h.comment]),n=c(v("cite"),["itemprop"],["author"]),d(n,["textContent"],[h.user_display_name]),o=c(v("time"),["datetime","itemprop"],[h.created_date,"datePublished"]),d(o,["textContent"],[new Date(h.created_date).toLocaleString()]),p=g(h.rating),k=d(v("div"),["className","innerHTML"],["rating-wrapper",p.outerHTML]),j=e(v("footer"),[b.createTextNode("â€” "),n,b.createTextNode(" on "),o]),e(m,[l,j]),e(i,[k,m]),a.className+=" joindin-talk-comment",a.appendChild(i)}function n(a,b){var c,f,h,i,j,k;c=b.talks[0],f=d(v("h1"),["textContent"],[c.talk_title]),h=d(v("a"),["href","innerHTML"],[c.website_uri,f.outerHTML]),i=d(v("p"),["textContent"],[c.talk_description]),j=d(v("span"),["textContent"],[c.speakers.map(function(a){return a.speaker_name}).join(" , ")]),k=g(c.average_rating),a.className+=" joindin-talk",e(a,[h,j,k,i])}function o(a){var c=p[a.getAttribute("data-type")],d=a.getAttribute("data-id"),e=s;if("cfps"===c)e+="events?filter=cfp",r.push(j.bind(null,a));else if("events"===c)e+=c+"/"+d,r.push(k.bind(null,a));else if("talk_comments"===c)e+=c+"/"+d,r.push(m.bind(null,a));else if("talks"===c)e+=c+"/"+d,r.push(n.bind(null,a));else{if("users"!==c)throw new Error("Data type not recognized");e+=c+"/"+d+"/talks",r.push(l.bind(null,a))}var f=v("script");f.src=e+"?format=json&callback=JoindIn.callbacks["+(r.length-1)+"]",b.head.appendChild(f),b.head.removeChild(f)}var p={cfps:"cfps",event:"events",speaker:"users",talk:"talks","talk-comment":"talk_comments"},q=".joindin-embed",r=[],s="http://api.joind.in/v2.1/",t="https://joind.in/inc/img/rating-RATING.gif",u="https://joind.in/inc/img/event_icons/",v=b.createElement.bind(b);[].forEach.call(b.querySelectorAll(q),o),a.JoindIn={callbacks:r}}(window,document);