/*! JoindIn.js 0.3.0 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
!function(a,b){"use strict";function c(a,b,c){for(var d=0;d<b.length;d++)a.setAttribute(b[d],c[d]);return a}function d(a,b,c){for(var d=0;d<b.length;d++)a[b[d]]=c[d];return a}function e(a,b){for(var c=0;c<b.length;c++)a.appendChild(b[c]);return a}function f(a){var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++)b+=a[c];return Math.round(b/a.length)}function g(a){return d(s("img"),["src","alt"],[r.replace(/RATING/,a),"Rate "+a+" of 5"])}function h(a){var b,c,f=s("dl");for(var g in a)b=d(s("dt"),["textContent"],[g+": "]),c=d(s("dd"),["textContent"],[a[g]]),e(f,[b,c]);return f}function i(a,f){var g,i,j,k,l,m,n,o,p,q="https://joind.in/inc/img/event_icons/";g=f.events[0],i=g.icon?c(s("img"),["src"],[q+g.icon]):b.createTextNode(""),j=d(s("h1"),["textContent"],[g.name]),k=d(s("a"),["href","innerHTML"],[g.website_uri,j.outerHTML]),l=d(s("a"),["href","textContent"],[g.href,g.href]),m=d(s("time"),["textContent"],[new Date(g.start_date).toDateString()]),c(m,["datetime"],[g.start_date]),n=d(s("time"),["textContent"],[new Date(g.end_date).toDateString()]),c(n,["datetime"],[g.end_date]),o=d(s("p"),["textContent"],[g.description]),p=h({Attendees:g.attendee_count,Tracks:g.tracks_count,Talks:g.talks_count}),a.className+=" joindin-event",e(a,[i,k,l,m,b.createTextNode(" - "),n,o,b.createTextNode("Other info about the event:"),p])}function j(a,b){var c,h,i,j,k,l="http://joind.in/user/view/";0!==b.talks.length&&(j=b.talks[0].speakers[0],c=d(s("h1"),["textContent"],[j.speaker_name]),h=d(s("a"),["href","innerHTML"],[l+j.speaker_uri.slice(j.speaker_uri.lastIndexOf("/")+1),c.outerHTML]),i=g(f(b.talks.map(function(a){return a.average_rating}))),k=d(s("span"),["textContent"],["("+b.talks.length+" talks)"]),a.className+=" joindin-speaker",e(a,[h,i,k]))}function k(a,f){var h,i,j,k,l,m,n,o,p;h=f.comments[0],i=d(s("blockquote"),["cite"],[h.talk_uri]),c(i,["itemprop","itemscope","itemtype"],["review","","http://schema.org/Review"]),m=d(s("div"),["className"],["text-wrapper"]),l=c(s("p"),["itemprop"],["description"]),d(l,["textContent"],[h.comment]),n=c(s("cite"),["itemprop"],["author"]),d(n,["textContent"],[h.user_display_name]),o=c(s("time"),["datetime","itemprop"],[h.created_date,"datePublished"]),d(o,["textContent"],[new Date(h.created_date).toLocaleString()]),p=g(h.rating),k=d(s("div"),["className","innerHTML"],["rating-wrapper",p.outerHTML]),j=e(s("footer"),[b.createTextNode("â€” "),n,b.createTextNode(" on "),o]),e(m,[l,j]),e(i,[k,m]),a.className+=" joindin-talk-comment",a.appendChild(i)}function l(a,b){var c,f,h,i,j,k;c=b.talks[0],f=d(s("h1"),["textContent"],[c.talk_title]),h=d(s("a"),["href","innerHTML"],[c.website_uri,f.outerHTML]),i=d(s("p"),["textContent"],[c.talk_description]),j=d(s("span"),["textContent"],[c.speakers.map(function(a){return a.speaker_name}).join(" , ")]),k=g(c.average_rating),a.className+=" joindin-talk",e(a,[h,j,k,i])}function m(a){var c=n[a.getAttribute("data-type")],d=a.getAttribute("data-id"),e=q;if("events"===c)e+=c+"/"+d,p.push(i.bind(null,a));else if("talk_comments"===c)e+=c+"/"+d,p.push(k.bind(null,a));else if("talks"===c)e+=c+"/"+d,p.push(l.bind(null,a));else{if("users"!==c)throw new Error("Data type not recognized");e+=c+"/"+d+"/talks",p.push(j.bind(null,a))}var f=s("script");f.src=e+"?format=json&callback=JoindIn.callbacks["+(p.length-1)+"]",b.head.appendChild(f),b.head.removeChild(f)}var n={event:"events",speaker:"users",talk:"talks","talk-comment":"talk_comments"},o=".joindin-embed",p=[],q="http://api.joind.in/v2.1/",r="https://joind.in/inc/img/rating-RATING.gif",s=b.createElement.bind(b);[].forEach.call(b.querySelectorAll(o),m),a.JoindIn={callbacks:p}}(window,document);